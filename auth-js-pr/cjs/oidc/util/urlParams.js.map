{"version":3,"file":"urlParams.js","names":["urlParamsToObject","hashOrSearch","plus2space","paramSplit","fragment","charAt","substring","obj","param","exec","key","value","decodeURIComponent","replace"],"sources":["../../../../lib/oidc/util/urlParams.ts"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* eslint-disable complexity, max-statements */\n\nexport function urlParamsToObject(hashOrSearch: string) {\n  // Predefine regexs for parsing hash\n  var plus2space = /\\+/g;\n  var paramSplit = /([^&=]+)=?([^&]*)/g;\n  var fragment = hashOrSearch || '';\n\n  // Some hash based routers will automatically add a / character after the hash\n  if (fragment.charAt(0) === '#' && fragment.charAt(1) === '/') {\n    fragment = fragment.substring(2);\n  }\n\n  // Remove the leading # or ?\n  if (fragment.charAt(0) === '#' || fragment.charAt(0) === '?') {\n    fragment = fragment.substring(1);\n  }\n\n\n  var obj = {};\n\n  // Loop until we have no more params\n  var param;\n  while (true) { // eslint-disable-line no-constant-condition\n    param = paramSplit.exec(fragment);\n    if (!param) { break; }\n\n    var key = param[1];\n    var value = param[2];\n\n    // id_token should remain base64url encoded\n    if (key === 'id_token' || key === 'access_token' || key === 'code') {\n      obj[key] = value;\n    } else {\n      obj[key] = decodeURIComponent(value.replace(plus2space, ' '));\n    }\n  }\n  return obj;\n}\n"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,SAASA,iBAAiB,CAACC,YAAoB,EAAE;EACtD;EACA,IAAIC,UAAU,GAAG,KAAK;EACtB,IAAIC,UAAU,GAAG,oBAAoB;EACrC,IAAIC,QAAQ,GAAGH,YAAY,IAAI,EAAE;;EAEjC;EACA,IAAIG,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,IAAID,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;IAC5DD,QAAQ,GAAGA,QAAQ,CAACE,SAAS,CAAC,CAAC,CAAC;EAClC;;EAEA;EACA,IAAIF,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,IAAID,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;IAC5DD,QAAQ,GAAGA,QAAQ,CAACE,SAAS,CAAC,CAAC,CAAC;EAClC;EAGA,IAAIC,GAAG,GAAG,CAAC,CAAC;;EAEZ;EACA,IAAIC,KAAK;EACT,OAAO,IAAI,EAAE;IAAE;IACbA,KAAK,GAAGL,UAAU,CAACM,IAAI,CAACL,QAAQ,CAAC;IACjC,IAAI,CAACI,KAAK,EAAE;MAAE;IAAO;IAErB,IAAIE,GAAG,GAAGF,KAAK,CAAC,CAAC,CAAC;IAClB,IAAIG,KAAK,GAAGH,KAAK,CAAC,CAAC,CAAC;;IAEpB;IACA,IAAIE,GAAG,KAAK,UAAU,IAAIA,GAAG,KAAK,cAAc,IAAIA,GAAG,KAAK,MAAM,EAAE;MAClEH,GAAG,CAACG,GAAG,CAAC,GAAGC,KAAK;IAClB,CAAC,MAAM;MACLJ,GAAG,CAACG,GAAG,CAAC,GAAGE,kBAAkB,CAACD,KAAK,CAACE,OAAO,CAACX,UAAU,EAAE,GAAG,CAAC,CAAC;IAC/D;EACF;EACA,OAAOK,GAAG;AACZ"}