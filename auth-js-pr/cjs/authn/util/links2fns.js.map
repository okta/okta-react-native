{"version":3,"file":"links2fns.js","names":["links2fns","sdk","tx","res","obj","ref","fns","linkName","_links","Object","prototype","hasOwnProperty","call","link","name","type","poll","getPollFn","fn","link2fn"],"sources":["../../../../lib/authn/util/links2fns.ts"],"sourcesContent":["import { OktaAuthHttpInterface } from '../../http/types';\nimport { AuthnTransactionFunctions, AuthnTransactionAPI } from '../types';\nimport { link2fn } from './link2fn';\nimport { getPollFn } from './poll';\n\nexport function links2fns(sdk: OktaAuthHttpInterface, tx: AuthnTransactionAPI, res, obj, ref) {\n  var fns = {} as AuthnTransactionFunctions;\n  for (var linkName in obj._links) {\n    if (!Object.prototype.hasOwnProperty.call(obj._links, linkName)) {\n      continue;\n    }\n\n    var link = obj._links[linkName];\n    \n    if (linkName === 'next') {\n      linkName = link.name;\n    }\n\n    if (link.type) {\n      fns[linkName] = link;\n      continue;\n    }\n\n    switch (linkName) {\n      // poll is only found at the transaction\n      // level, so we don't need to pass the link\n      case 'poll':\n        fns.poll = getPollFn(sdk, res, ref);\n        break;\n\n      default:\n        var fn = link2fn(sdk, tx, res, obj, link, ref);\n        if (fn) {\n          fns[linkName] = fn;\n        }\n    }\n  }\n  return fns;\n}\n"],"mappings":";;;AAEA;AACA;AAEO,SAASA,SAAS,CAACC,GAA0B,EAAEC,EAAuB,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAE;EAC5F,IAAIC,GAAG,GAAG,CAAC,CAA8B;EACzC,KAAK,IAAIC,QAAQ,IAAIH,GAAG,CAACI,MAAM,EAAE;IAC/B,IAAI,CAACC,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,GAAG,CAACI,MAAM,EAAED,QAAQ,CAAC,EAAE;MAC/D;IACF;IAEA,IAAIM,IAAI,GAAGT,GAAG,CAACI,MAAM,CAACD,QAAQ,CAAC;IAE/B,IAAIA,QAAQ,KAAK,MAAM,EAAE;MACvBA,QAAQ,GAAGM,IAAI,CAACC,IAAI;IACtB;IAEA,IAAID,IAAI,CAACE,IAAI,EAAE;MACbT,GAAG,CAACC,QAAQ,CAAC,GAAGM,IAAI;MACpB;IACF;IAEA,QAAQN,QAAQ;MACd;MACA;MACA,KAAK,MAAM;QACTD,GAAG,CAACU,IAAI,GAAG,IAAAC,eAAS,EAAChB,GAAG,EAAEE,GAAG,EAAEE,GAAG,CAAC;QACnC;MAEF;QACE,IAAIa,EAAE,GAAG,IAAAC,gBAAO,EAAClB,GAAG,EAAEC,EAAE,EAAEC,GAAG,EAAEC,GAAG,EAAES,IAAI,EAAER,GAAG,CAAC;QAC9C,IAAIa,EAAE,EAAE;UACNZ,GAAG,CAACC,QAAQ,CAAC,GAAGW,EAAE;QACpB;IAAC;EAEP;EACA,OAAOZ,GAAG;AACZ"}